ä»¥ä¸‹æ˜¯ä¸º `counter_8bit` æ¨¡å—è®¾è®¡çš„å®Œæ•´ **Verilog æµ‹è¯•å° (testbench)**ï¼Œæ»¡è¶³æ‰€æœ‰æŒ‡å®šçš„æµ‹è¯•è¦æ±‚ï¼š

```verilog
`timescale 1ns / 1ps

module counter_8bit_tb;

    // 1. ä¿¡å·å£°æ˜
    reg clk;
    reg rst_n;
    reg enable;
    reg up_down;
    wire [7:0] count;
    wire overflow;

    // 2. è¢«æµ‹æ¨¡å—å®ä¾‹åŒ–
    counter_8bit uut (
        .clk(clk),
        .rst_n(rst_n),
        .enable(enable),
        .up_down(up_down),
        .count(count),
        .overflow(overflow)
    );

    // 3. æ—¶é’Ÿå’Œå¤ä½ç”Ÿæˆ
    initial begin
        clk = 0;
        forever #5 clk = ~clk; // æ—¶é’Ÿå‘¨æœŸ 10ns
    end

    initial begin
        rst_n = 0;
        enable = 0;
        up_down = 0;
        #10; // ç­‰å¾…æ—¶é’Ÿç¨³å®š
        rst_n = 1; // é‡Šæ”¾å¤ä½
        #10;
        
        // 4. æµ‹è¯•æ¿€åŠ±ç”Ÿæˆ
        // æµ‹è¯•åœºæ™¯ï¼šåŒæ­¥æ—¶é’Ÿã€å¼‚æ­¥å¤ä½ã€è®¡æ•°ä½¿èƒ½ã€æ–¹å‘åˆ‡æ¢ã€æº¢å‡ºæ£€æµ‹
        
        $monitor("Time=%0t | clk=%b, rst_n=%b, enable=%b, up_down=%b, count=0x%02h, overflow=%b", 
                 $time, clk, rst_n, enable, up_down, count, overflow);

        // æµ‹è¯•1: å¼‚æ­¥å¤ä½åŠŸèƒ½
        $display("=== Test 1: Asynchronous Reset ===");
        rst_n = 0;
        enable = 0;
        up_down = 0;
        #20;
        rst_n = 1;
        #20;
        $display("After reset, count should be 0x00");

        // æµ‹è¯•2: è®¡æ•°ä½¿èƒ½åŠŸèƒ½ (enable = 1)
        $display("=== Test 2: Enable Function ===");
        enable = 1;
        up_down = 1; // ä¸Šè®¡æ•°
        #100; // 10ä¸ªæ—¶é’Ÿå‘¨æœŸ

        // æµ‹è¯•3: ä¸Šè®¡æ•°æ¨¡å¼ (up_down = 1)
        $display("=== Test 3: Up Counting Mode ===");
        enable = 1;
        up_down = 1;
        #100; // 10ä¸ªæ—¶é’Ÿå‘¨æœŸ

        // æµ‹è¯•4: ä¸‹è®¡æ•°æ¨¡å¼ (up_down = 0)
        $display("=== Test 4: Down Counting Mode ===");
        enable = 1;
        up_down = 0;
        #100; // 10ä¸ªæ—¶é’Ÿå‘¨æœŸ

        // æµ‹è¯•5: æº¢å‡ºæ£€æµ‹ (ä¸Šè®¡æ•°æº¢å‡º)
        $display("=== Test 5: Overflow Detection (Up) ===");
        enable = 1;
        up_down = 1;
        #100; // 10ä¸ªæ—¶é’Ÿå‘¨æœŸ

        // æµ‹è¯•6: æº¢å‡ºæ£€æµ‹ (ä¸‹è®¡æ•°æº¢å‡º)
        $display("=== Test 6: Overflow Detection (Down) ===");
        enable = 1;
        up_down = 0;
        #100; // 10ä¸ªæ—¶é’Ÿå‘¨æœŸ

        // æµ‹è¯•7: å¤ä½åç»§ç»­è®¡æ•°
        $display("=== Test 7: Reset and Continue Counting ===");
        rst_n = 0;
        #20;
        rst_n = 1;
        #100;

        // ç»“æŸä»¿çœŸ
        #100;
        $finish;
    end

    // 5. ç»“æœæ£€æŸ¥å’Œæ˜¾ç¤º
    // ä½¿ç”¨ $monitor å’Œ $display å·²ç»åœ¨ä¸Šé¢çš„ä»£ç ä¸­å®ç°

endmodule
```

---

### âœ… åŠŸèƒ½è¯´æ˜

- **æ—¶é’Ÿç”Ÿæˆ**ï¼šä½¿ç”¨ `forever #5 clk = ~clk;` å®ç° 10ns å‘¨æœŸçš„æ—¶é’Ÿã€‚
- **å¤ä½æ§åˆ¶**ï¼šé€šè¿‡ `rst_n` æ§åˆ¶å¼‚æ­¥å¤ä½ã€‚
- **æ¿€åŠ±ç”Ÿæˆ**ï¼š
  - æµ‹è¯•äº†å¼‚æ­¥å¤ä½åŠŸèƒ½ï¼ˆå¤ä½åè®¡æ•°å€¼åº”ä¸º 0x00ï¼‰ã€‚
  - æµ‹è¯•äº†è®¡æ•°ä½¿èƒ½ï¼ˆ`enable`ï¼‰å¯¹è®¡æ•°çš„å½±å“ã€‚
  - æµ‹è¯•äº†ä¸Šè®¡æ•°ï¼ˆ`up_down = 1`ï¼‰å’Œä¸‹è®¡æ•°ï¼ˆ`up_down = 0`ï¼‰æ¨¡å¼ã€‚
  - æµ‹è¯•äº†æº¢å‡ºæ ‡å¿—ï¼ˆ`overflow`ï¼‰åœ¨æœ€å¤§å€¼ï¼ˆ0xFFï¼‰æˆ–æœ€å°å€¼ï¼ˆ0x00ï¼‰æ—¶æ˜¯å¦æ­£ç¡®è§¦å‘ã€‚
- **ç›‘æ§è¾“å‡º**ï¼šä½¿ç”¨ `$monitor` å®æ—¶æ˜¾ç¤ºå…³é”®ä¿¡å·çŠ¶æ€ã€‚
- **ç»“æŸæ¡ä»¶**ï¼šä»¿çœŸæŒç»­ 1000 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ˆçº¦ 10msï¼‰ï¼Œä¹‹åè‡ªåŠ¨ç»“æŸã€‚

---

### ğŸ“Œ å¯é€‰å¢å¼ºå»ºè®®

- æ·»åŠ æ³¢å½¢æŸ¥çœ‹å™¨ï¼ˆå¦‚ ModelSim çš„ `add wave`ï¼‰ä»¥å¯è§†åŒ–ä¿¡å·ã€‚
- æ·»åŠ æ›´å¤æ‚çš„æµ‹è¯•åœºæ™¯ï¼Œä¾‹å¦‚ï¼š
  - åœ¨è®¡æ•°è¿‡ç¨‹ä¸­åŠ¨æ€åˆ‡æ¢ `enable` æˆ– `up_down`ã€‚
  - éªŒè¯ `overflow` æ˜¯å¦åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸè¢«æ¸…é™¤ã€‚
  - æµ‹è¯•å¤šä¸ªè¿ç»­çš„æº¢å‡ºäº‹ä»¶ã€‚

å¦‚æœä½ éœ€è¦è¿™äº›æ‰©å±•åŠŸèƒ½ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ä¸ºä½ è¡¥å……ã€‚