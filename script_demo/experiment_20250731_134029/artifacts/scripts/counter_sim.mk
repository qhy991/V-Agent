# Auto-generated Makefile for Verilog simulation
# Generated by CentralizedAgentFramework ScriptManager

# 变量定义
VERILOG_FILES = counter_8bit.v
TESTBENCH_FILES = counter_8bit_tb.v
ALL_FILES = $(VERILOG_FILES) $(TESTBENCH_FILES)
TARGET = counter_sim
TOP_MODULE = counter_8bit_tb

# 工具配置
IVERILOG = iverilog
VVP = vvp
GTKWAVE = gtkwave

# 默认目标
all: compile simulate

# 编译目标
compile: $(TARGET)

$(TARGET): $(ALL_FILES)
	@echo "🔨 编译Verilog文件..."
	$(IVERILOG) -o $(TARGET) $(ALL_FILES)
	@echo "✅ 编译完成"

# 仿真目标
simulate: $(TARGET)
	@echo "▶️ 运行仿真..."
	$(VVP) $(TARGET)
	@echo "✅ 仿真完成"

# 波形查看
wave: $(TARGET).vcd
	$(GTKWAVE) $(TARGET).vcd

# 清理目标
clean:
	@echo "🧹 清理文件..."
	rm -f $(TARGET) *.vcd *.lxt2
	@echo "✅ 清理完成"

# 显示帮助
help:
	@echo "可用目标:"
	@echo "  all      - 编译并运行仿真"
	@echo "  compile  - 仅编译"
	@echo "  simulate - 仅运行仿真"
	@echo "  wave     - 查看波形"
	@echo "  clean    - 清理生成的文件"
	@echo "  help     - 显示此帮助信息"

# 检查文件
check:
	@echo "📋 检查文件存在性:"
	@for file in $(ALL_FILES); do \
		if [ -f $$file ]; then \
			echo "  ✅ $$file"; \
		else \
			echo "  ❌ $$file (不存在)"; \
		fi; \
	done

.PHONY: all compile simulate wave clean help check
